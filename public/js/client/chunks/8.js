(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{NqQC:function(t,e,r){"use strict";r.r(e);var o=r("djKw"),n=r.n(o),a=r("IAPz"),i=r("+4WA"),s=r("3uf8"),c=r("cbbs"),l=r("e9yv"),u=r("t8C5"),d=r("WzGQ"),p=r("dQIy"),f=r("BBKr"),m=r("tQ25"),h=r("c34V"),b=r("Bc29"),v=r("VOL1"),y=r("uvMX"),_=r("hbd/"),g=r("sejE"),w=r("4cv3"),x=r("wWPa");function j(t){var e={add:"/api/projects/create",edit:"/api/projects/".concat(t.params.id,"/edit")};return e[t.meta.mode]||e.add}var k={mixins:[y.a],components:{XTagInput:x.a,Error:g.a,BCard:a.a,BCardText:i.a,BLink:s.a,BRow:c.a,BCol:l.a,BImg:u.a,BFormInput:d.a,BFormGroup:p.a,BFormFile:f.a,BContainer:m.a,BFormCheckboxGroup:h.a,BFormTextarea:b.a,BButton:v.a},directives:{Ripple:w.a},data:function(){return{show:!1,resource:"/projects",store:"/api/projects",method:"POST",title:"Add",message:"New Project Added",permissions:[]}},beforeRouteEnter:function(t,e,r){Object(_.b)(j(t)).then((function(t){r((function(e){return e.setData(t)}))}))},beforeRouteUpdate:function(t,e,r){var o=this;Object(_.b)(j(t)).then((function(t){o.setData(t),r()}))},methods:{setData:function(t){n.a.set(this.$data,"form",t.data.form),"edit"===this.$route.meta.mode&&(this.store="/api/projects/".concat(this.$route.params.id,"?_method=PUT"),this.title="Edit",this.message="Project has been updated"),this.show=!0},formSubmitted:function(){var t=this;this.submitMultipartForm(this.form,(function(e){t.success(),t.successfull(e)}))},successfull:function(t){this.$router.push("".concat(this.resource))},onCountryUpdate:function(t){n.a.set(this.$data.form,"country",t),n.a.set(this.$data.form,"country_id",t.id),n.a.set(this.$data.form,"city",null),n.a.set(this.$data.form,"city_id",null)},onCityUpdate:function(t){n.a.set(this.$data.form,"city",t),n.a.set(this.$data.form,"city_id",t.id)},onProjectTypeUpdate:function(t){n.a.set(this.$data.form,"project_type",t),n.a.set(this.$data.form,"project_type_id",t.id)},delete_image:function(t,e){var r=this;Object(_.b)("/api/delete_project_image/"+t).then((function(t){t.data.saved&&(r.form.images.splice(e,1),r.message="Image Deleted",r.deleted())}))}}},$=r("KHd+"),C=Object($.a)(k,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.show?r("div",[r("b-card",{attrs:{title:t.title+" Project"}},[r("b-row",[r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Title","label-for":"mc-title"}},[r("b-form-input",{attrs:{id:"mc-title",placeholder:"Title"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),t._v(" "),r("error",{attrs:{error:t.error.title}})],1)],1),t._v(" "),r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Website","label-for":"mc-website"}},[r("b-form-input",{attrs:{id:"mc-website",placeholder:"Website"},model:{value:t.form.website,callback:function(e){t.$set(t.form,"website",e)},expression:"form.website"}}),t._v(" "),r("error",{attrs:{error:t.error.website}})],1)],1),t._v(" "),r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Country","label-for":"mc-country-id"}},[r("x-tag-input",{attrs:{resource:"/api/search/countries",value:t.form.country,column:"title",name:"title"},on:{input:t.onCountryUpdate}}),t._v(" "),r("error",{attrs:{error:t.error.country_id}})],1)],1),t._v(" "),r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"City","label-for":"mc-city-id"}},[r("x-tag-input",{attrs:{resource:"/api/search/cities?country_id="+t.form.country_id,value:t.form.city,disabled:null==t.form.country_id,column:"title",name:"title"},on:{input:t.onCityUpdate}}),t._v(" "),r("error",{attrs:{error:t.error.city_id}})],1)],1),t._v(" "),r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Location","label-for":"mc-location"}},[r("b-form-textarea",{attrs:{id:"mc-location",placeholder:"Location"},model:{value:t.form.location,callback:function(e){t.$set(t.form,"location",e)},expression:"form.location"}}),t._v(" "),r("error",{attrs:{error:t.error.location}})],1)],1),t._v(" "),r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Nearest Location","label-for":"mc-nearest-location"}},[r("b-form-textarea",{attrs:{id:"mc-nearest-location",placeholder:"Nearest Location"},model:{value:t.form.nearest_location,callback:function(e){t.$set(t.form,"nearest_location",e)},expression:"form.nearest_location"}}),t._v(" "),r("error",{attrs:{error:t.error.nearest_location}})],1)],1),t._v(" "),r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Phone Number","label-for":"mc-phone-number"}},[r("b-form-input",{attrs:{id:"mc-phone-number",placeholder:"Phone Number"},model:{value:t.form.phone_number,callback:function(e){t.$set(t.form,"phone_number",e)},expression:"form.phone_number"}}),t._v(" "),r("error",{attrs:{error:t.error.phone_number}})],1)],1),t._v(" "),r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Land Space","label-for":"mc-land-space"}},[r("b-form-input",{attrs:{id:"mc-land-space",placeholder:"Land Space"},model:{value:t.form.land_space,callback:function(e){t.$set(t.form,"land_space",e)},expression:"form.land_space"}}),t._v(" "),r("error",{attrs:{error:t.error.land_space}})],1)],1),t._v(" "),r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Project Type","label-for":"mc-project-type-id"}},[r("x-tag-input",{attrs:{resource:"/api/search/project_types",value:t.form.project_type,column:"title",name:"title"},on:{input:t.onProjectTypeUpdate}}),t._v(" "),r("error",{attrs:{error:t.error.project_type_id}})],1)],1),t._v(" "),r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Project Images (Multiple Images)","label-for":"mc-project-image"}},[r("b-form-file",{attrs:{id:"mc-project-image",placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here...",accept:".jpg, .jpeg, .png, .gif",multiple:""},model:{value:t.form.project_images,callback:function(e){t.$set(t.form,"project_images",e)},expression:"form.project_images"}})],1)],1),t._v(" "),r("b-col",{staticClass:"mb-2",attrs:{md:"12"}},[t.form.images?[r("b-container",{staticClass:"p-1 bg-dark",attrs:{fluid:""}},[r("b-row",t._l(t.form.images,(function(e,o){return r("b-col",{staticClass:"p-1",attrs:{md:"3"}},[r("b-img",{attrs:{thumbnail:"",fluid:"",src:"/api/attachment/project_"+t.form.id+"/"+e.path},on:{click:function(r){return t.delete_image(e.id,o)}}})],1)})),1)],1)]:t._e()],2)],1),t._v(" "),r("b-row",[r("b-col",[r("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mr-1",attrs:{type:"submit",variant:"primary"},on:{click:t.formSubmitted}},[t._v("\n                    Submit\n                ")]),t._v(" "),r("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(186, 191, 199, 0.15)",expression:"'rgba(186, 191, 199, 0.15)'",modifiers:{400:!0}}],attrs:{type:"reset",variant:"outline-secondary",to:{path:"/projects"}}},[t._v("\n                    Cancel\n                ")])],1)],1)],1)],1):t._e()}),[],!1,null,"a1e5c25c",null);e.default=C.exports},f9f4:function(t,e,r){"use strict";function o(t,e,r){var n=e||new FormData;for(var a in t)if(t.hasOwnProperty(a)){var i=r?r+"["+a+"]":a;if(t[a]!==Object(t[a])||t[a]instanceof File)if(t[a]instanceof Array)for(var s=0;s<t[a].length;s++)o(t[a][s],n,"".concat(i,"[").concat(s,"]"));else{var c=null===t[a]?"":t[a];n.append(i,c)}else o(t[a],n,i)}return n}r.d(e,"a",(function(){return o}))},"hbd/":function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return s}));var o=r("Poqw"),n=r.n(o);r("f9f4");function a(t,e){return n()({method:"GET",url:t,params:e})}function i(t,e){return s("POST",t,e)}function s(t,e,r){return n()({method:t,url:e,data:r})}},sejE:function(t,e,r){"use strict";var o={props:{error:{type:Array,default:function(){return[]}}}},n=r("KHd+"),a=Object(n.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return this.error?e("small",{staticClass:"text-danger"},[this._v(this._s(this.error[0]))]):this._e()}),[],!1,null,null,null);e.a=a.exports},uvMX:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var o=r("hbd/"),n=r("f9f4"),a=r("1w2d"),i={data:function(){return{form:{},error:{},isProcessing:!1,show:!1}},computed:{mode:function(){return this.$route.meta.mode},isEdit:function(){return"edit"===this.mode}},methods:{errors:function(t){return this.error[t]?"error-bg":""},success:function(){this.$toast({component:a.a,props:{title:"Success",icon:"BellIcon",text:this.message,variant:"success"}})},deleted:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.message;this.$toast({component:a.a,props:{title:"Deleted",icon:"BellIcon",text:t,variant:"danger"}})},clearErrors:function(){this.error={}},handleError:function(t){422===t.response.status&&(this.error=t.response.data.errors)},destroy:function(t,e,r){this.clearErrors(),Object(o.a)("DELETE",t,r).then((function(t){var r=t.data;r.saved&&e(r)})).catch(this.handleError)},submit:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;this.clearErrors(),"file"==t&&(this.form=Object(n.a)(this.form)),Object(o.a)(this.method,this.store,this.form).then((function(t){var r=t.data;r.saved&&e(r)})).catch(this.handleError)},submitMultipartForm:function(t,e){var r=this;this.clearErrors(),Object(o.a)(this.method,this.store,Object(n.a)(this.form)).then((function(t){var r=t.data;return!!r.saved&&(e(r),!0)})).catch((function(t){return r.handleError(t),!1}))}}}},wWPa:function(t,e,r){"use strict";var o=r("C2Uh"),n=r("hbd/"),a=r("1w2d"),i={name:"XTagInput",model:{prop:"value",event:"input"},props:{resource:String,column:String,tabindex:{default:0},positionRelative:{type:Boolean,default:!1},value:[Object,Array],disabled:{default:!1,type:Boolean},multiple:{default:!1,type:Boolean},removable:{default:!1,type:Boolean},name:{default:"value"},keyIndex:String,relation:{type:String,default:""},params:{type:[Object,Array],default:function(){return{}}}},data:function(){return{isLoading:!1,showDropdown:!1,selectIndex:-1,search:"",options:[]}},computed:{availableOptions:function(){return this.options}},methods:{removeVal:function(){this.$emit("input",{id:null})},remove:function(t,e){var r=this.value;r.splice(e,1),this.$emit("input",r)},onSearch:function(t){this.search=event.target.value,this.fetch(this.search)},fetch:Object(o.debounce)((function(t){var e=this;this.isLoading=!0;var r={q:t,column:this.column};Object(n.b)("".concat(this.resource),r).then((function(t){t.data&&e.$set(e.$data,"options",t.data.data),e.isLoading=!1}))}),300),onUpKey:function(t){var e=this;this.disabled||(this.selectIndex>0?(this.selectIndex--,this.selectIndex>4&&this.$nextTick((function(){e.$refs.items.scrollTop-=28}))):(this.selectIndex=this.options.length-1,this.$nextTick((function(){e.$refs.items.scrollTop=28*e.selectIndex}))))},onDownKey:function(t){var e=this;this.disabled||(this.showDropdown||this.open(),this.options.length-1>this.selectIndex?(this.selectIndex++,this.selectIndex>4&&this.$nextTick((function(){e.$refs.items.scrollTop+=28}))):(this.selectIndex=0,this.$nextTick((function(){e.$refs.items.scrollTop=0}))))},onKeydownMain:function(t){this.open()},select:function(t){if(this.multiple){var e=this.value;if(0===this.value.length){var r={};""==this.relation?e.push(t):(r["".concat(this.keyIndex)]=t.id,r["".concat(this.relation)]=t,e.push(r)),this.$emit("input",e)}else{for(var o=!1,n=0;n<e.length;n++)t.id===e[n][this.keyIndex]&&(this.$toast({component:a.a,props:{title:"Alert",icon:"BellIcon",text:"Option already selected above",variant:"danger"}}),o=!0);if(o)return;var i={};""==this.relation?e.push(t):(i["".concat(this.keyIndex)]=t.id,i["".concat(this.relation)]=t,e.push(i)),this.$emit("input",e)}}else this.$emit("input",t);this.close()},onEnter:function(){if(!(this.disabled||this.selectIndex<0)){var t=this.options[this.selectIndex];this.select(t)}},onBlur:function(){this.close()},onMouse:function(t){this.selectIndex=t},close:function(){this.showDropdown=!1,this.selectIndex=-1,this.search="",this.options=[]},open:function(){var t=this;this.showDropdown=!0,this.$nextTick((function(){t.$refs.search.focus(),t.options.length||t.fetch()}))},toggle:function(){this.disabled||(this.showDropdown?this.close():this.open())}}},s=r("KHd+"),c=Object(s.a)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"select-form"},[r("div",{ref:"toggle",staticClass:"select-input",attrs:{tabindex:t.disabled?-1:t.tabindex,disabled:t.disabled},on:{click:t.toggle,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.onKeydownMain.apply(null,arguments))}}},[t.multiple?r("div",{staticClass:"select-text"},[t.value&&t.value.length?r("div",{staticClass:"select-tags mb-1"},t._l(t.value,(function(e,o){return r("div",{staticClass:"tag tag-primary"},[r("span",{staticClass:"tag-text"},[t._v("\n                      "+t._s(""===t.relation?e[t.name]:e[t.relation][t.name])+"\n                    ")]),t._v(" "),r("feather-icon",{attrs:{icon:"XIcon",size:"12"},on:{mousedown:function(r){return r.preventDefault(),t.remove(e,o)}}})],1)})),0):t._e()]):r("div",{staticClass:"select-text"},[t._v("\n            "+t._s(t.value&&t.value[t.name]?t.value[t.name]:"Select")+"\n        ")]),t._v(" "),t.removable&&t.value&&t.value.id?r("span",{staticClass:"select-remove icon icon-trash-a",on:{click:t.removeVal}}):r("span",{class:["select-icon icon icon-arrow-"+(t.showDropdown?"up-b":"down-b")]})]),t._v(" "),t.showDropdown?r("div",{staticClass:"select-dropdown",style:!0===t.positionRelative?"position:relative":""},[r("div",{staticClass:"select-inner"},[r("div",{staticClass:"select-search-wrap"},[r("input",{ref:"search",staticClass:"select-search",attrs:{type:"text",placeholder:"Search..."},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.onDownKey.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onEnter.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.onUpKey.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.onBlur.apply(null,arguments)}],input:t.onSearch,blur:t.onBlur}})]),t._v(" "),r("div",{ref:"items",staticClass:"select-items"},t._l(t.availableOptions,(function(e,o){return r("div",{class:["select-item",t.selectIndex===o?"select-active":""],on:{mouseover:function(e){return e.preventDefault(),t.onMouse(o)},mousedown:function(r){return r.preventDefault(),t.select(e)}}},[r("span",[t._v(t._s(e[t.name]))])])})),0)])]):t._e()])}),[],!1,null,null,null);e.a=c.exports}}]);