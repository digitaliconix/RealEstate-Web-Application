(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"E+c2":function(t,e,n){"use strict";n.r(e);var i=n("djKw"),a=n.n(i),o=n("dQIy"),s=n("OLFr"),l=n("IAPz"),r=n("+4WA"),c=n("3uf8"),u=n("VOL1"),d=n("cbbs"),p=n("e9yv"),h=n("Nr6K"),m=n("+EKj"),f=n("g42O"),v=n("hbd/"),b=n("4cv3"),g=n("wWPa"),y={components:{BFormGroup:o.a,BModal:s.a,BCard:l.a,BCardText:r.a,BLink:c.a,BButton:u.a,BRow:d.a,BCol:p.a,BTooltip:h.a,Panel:f.a,TagInput:g.a},directives:{"b-modal":m.a,Ripple:b.a},name:"Index",created:function(){var t=this;Object(v.b)("/api/projects/".concat(this.$route.params.id)).then((function(e){a.a.set(t.$data,"project",e.data.model)}))},data:function(){return{project:null,model:null,urlApi:"/api/project/".concat(this.$route.params.id,"/units"),resource:"/projects/".concat(this.$route.params.id,"/units"),columns:[{label:"Unit Number",field:"number"},{label:"Building",field:"title",displayText:"building"},{label:"Unit Type",field:"title",displayText:"unit_type"},{label:"Area",field:"area"},{label:"Measurement Type",field:"title",displayText:"measurement_type"},{label:"Net Price",field:"total"},{label:"Unit Category",field:"title",displayText:"unit_category"},{label:"Action",field:"action",action:!0}]}},methods:{handleOk:function(t){t.preventDefault(),this.updateRoles()},edit:function(t){this.$router.push("".concat(this.resource,"/").concat(t,"/edit"))},projectSetup:function(t){this.$router.push("".concat(this.resource,"/setup/").concat(t))},deleteUser:function(t){console.log(t)}}},w=n("KHd+"),_=Object(w.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card",{attrs:{title:(t.project?t.project.title:"")+" Units"}},[n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mr-1 mb-1",attrs:{type:"submit",variant:"primary",align:"right",to:{name:"view-projects"}}},[t._v("\n                    Go Back\n                ")]),t._v(" "),n("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mr-1 mb-1",attrs:{type:"submit",variant:"primary",align:"right",to:{name:"create-units"}}},[t._v("\n                    Create\n                ")])],1)],1),t._v(" "),n("panel",{ref:"panel",attrs:{"url-api":t.urlApi,columns:t.columns,resource:t.resource},scopedSlots:t._u([{key:"action",fn:function(e){return n("div",{staticClass:"text-nowrap"},[n("feather-icon",{staticClass:"cursor-pointer",attrs:{id:"unit-row-"+e.item.id+"-edit-icon",icon:"EditIcon",size:"16"},on:{click:function(n){return t.edit(e.item.id)}}}),t._v(" "),n("b-tooltip",{staticClass:"cursor-pointer",attrs:{target:"unit-row-"+e.item.id+"-edit-icon",title:"Edit Unit"}})],1)}}])})],1)],1)}),[],!1,null,"28d0a2b8",null);e.default=_.exports},g42O:function(t,e,n){"use strict";var i=n("djKw"),a=n.n(i),o=n("cbbs"),s=n("e9yv"),l=n("G/QR"),r=n("gnRo"),c=n("wMrI"),u=n("dQIy"),d=n("WzGQ"),p=n("eYZ3"),h=n("VOL1"),m=n("Nifr"),f=n("hbd/"),v=n("WHwe"),b=n("4cv3"),g=n("1w2d"),y={name:"Panel",components:{BRow:o.a,BCol:s.a,BAvatar:l.a,BBadge:r.a,BPagination:c.a,BFormGroup:u.a,BFormInput:d.a,BFormSelect:p.a,BButton:h.a,VueGoodTable:m.a,ToastificationContent:g.a},directives:{Ripple:b.a},props:{additionalParams:{type:Object,default:{q:""}},urlApi:{type:String,required:!0},columns:{type:Array,required:!0},initialGet:{type:Boolean,default:!0},resource:{type:String},sortEnabled:{type:Boolean}},computed:{direction:function(){return v.a.state.appConfig.isRTL?(this.dir=!0,this.dir):(this.dir=!1,this.dir)}},data:function(){return{pageLength:5,dir:!1,model:{},isLoading:!0}},created:function(){this.initialGet&&this.reload()},methods:{reload:function(){var t=this;Object(f.b)(this.urlApi,this.additionalParams).then((function(e){t.model=e.data.data,t.pageLength=e.data.data.per_page,t.isLoading=!1}))},onRowClick:function(t){this.$emit("rowClicked",t.row)},nextPage:function(){var t=this;Object(f.b)(this.model.next_page_url).then((function(e){a.a.set(t.$data,"model",e.data.data),t.pageLength=e.data.data.per_page}))},prevPage:function(){var t=this;Object(f.b)(this.model.prev_page_url).then((function(e){a.a.set(t.$data,"model",e.data.data),t.pageLength=e.data.data.per_page}))}}},w=n("KHd+"),_=Object(w.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("vue-good-table",{attrs:{isLoading:t.isLoading,columns:t.columns,rows:t.model.data,rtl:t.direction,"pagination-options":{enabled:!0,perPage:t.pageLength},"sort-options":{enabled:t.sortEnabled},theme:"my-theme"},on:{"on-row-click":t.onRowClick},scopedSlots:t._u([{key:"table-row",fn:function(e){return[e.column.action?[t._t("action",null,{item:e.row})]:t._e(),t._v(" "),e.column.extra?[t._t("extra",null,{item:e.row})]:e.column.displayText?[e.column.multiple?[e.row[e.column.displayText].length>0?t._l(e.row[e.column.displayText],(function(i,a){return n("b-badge",{key:a,staticClass:"mr-1",attrs:{variant:"primary"}},[t._v("\n                                    "+t._s(i[e.column.field])+"\n                                ")])})):[n("span",[t._v("No "+t._s(e.column.displayText))])]]:[null!=e.row[e.column.displayText]?n("span",[t._v("\n                                "+t._s(e.row[e.column.displayText][e.column.field])+"\n                            ")]):n("span",[t._v("\n                                -\n                            ")])]]:e.column.format?["formatDate"==e.column.format?n("span",[t._v("\n                            "+t._s(t._f("formatDate")(e.row[e.column.field]))+"\n                        ")]):t._e()]:[n("span",[t._v("\n                            "+t._s(e.column.relation?e.column.relation:e.row[e.column.field])+"\n                        ")])]]}},{key:"pagination-bottom",fn:function(e){return[n("div",{staticClass:"d-flex justify-content-between flex-wrap"},[n("div",{staticClass:"d-flex align-items-center mb-0 mt-1"},[n("span",{staticClass:"text-nowrap"},[t._v("\n                              Showing 1 to\n                            ")]),t._v(" "),n("b-form-select",{staticClass:"mx-1",attrs:{options:["25","50","100"]},on:{input:function(t){return e.perPageChanged({currentPerPage:t})}},model:{value:t.pageLength,callback:function(e){t.pageLength=e},expression:"pageLength"}}),t._v(" "),n("span",{staticClass:"text-nowrap"},[t._v(" of "+t._s(e.total)+" entries ")])],1),t._v(" "),n("div",{staticClass:"align-content-end mb-0 mt-1"},[n("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mr-1",attrs:{type:"submit",variant:"primary",disabled:null==t.model.prev_page_url},on:{click:t.prevPage}},[n("feather-icon",{attrs:{icon:"ChevronLeftIcon",size:"18"}})],1),t._v(" "),n("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mr-1",attrs:{type:"submit",variant:"primary",disabled:null==t.model.next_page_url},on:{click:t.nextPage}},[n("feather-icon",{attrs:{icon:"ChevronRightIcon",size:"18"}})],1)],1)])]}}],null,!0)})],1)],1)],1)}),[],!1,null,"404467bc",null);e.a=_.exports},wWPa:function(t,e,n){"use strict";var i=n("C2Uh"),a=n("hbd/"),o=n("1w2d"),s={name:"XTagInput",model:{prop:"value",event:"input"},props:{resource:String,column:String,tabindex:{default:0},positionRelative:{type:Boolean,default:!1},value:[Object,Array],disabled:{default:!1,type:Boolean},multiple:{default:!1,type:Boolean},removable:{default:!1,type:Boolean},name:{default:"value"},keyIndex:String,relation:{type:String,default:""},params:{type:[Object,Array],default:function(){return{}}}},data:function(){return{isLoading:!1,showDropdown:!1,selectIndex:-1,search:"",options:[]}},computed:{availableOptions:function(){return this.options}},methods:{removeVal:function(){this.$emit("input",{id:null})},remove:function(t,e){var n=this.value;n.splice(e,1),this.$emit("input",n)},onSearch:function(t){this.search=event.target.value,this.fetch(this.search)},fetch:Object(i.debounce)((function(t){var e=this;this.isLoading=!0;var n={q:t,column:this.column};Object(a.b)("".concat(this.resource),n).then((function(t){t.data&&e.$set(e.$data,"options",t.data.data),e.isLoading=!1}))}),300),onUpKey:function(t){var e=this;this.disabled||(this.selectIndex>0?(this.selectIndex--,this.selectIndex>4&&this.$nextTick((function(){e.$refs.items.scrollTop-=28}))):(this.selectIndex=this.options.length-1,this.$nextTick((function(){e.$refs.items.scrollTop=28*e.selectIndex}))))},onDownKey:function(t){var e=this;this.disabled||(this.showDropdown||this.open(),this.options.length-1>this.selectIndex?(this.selectIndex++,this.selectIndex>4&&this.$nextTick((function(){e.$refs.items.scrollTop+=28}))):(this.selectIndex=0,this.$nextTick((function(){e.$refs.items.scrollTop=0}))))},onKeydownMain:function(t){this.open()},select:function(t){if(this.multiple){var e=this.value;if(0===this.value.length){var n={};""==this.relation?e.push(t):(n["".concat(this.keyIndex)]=t.id,n["".concat(this.relation)]=t,e.push(n)),this.$emit("input",e)}else{for(var i=!1,a=0;a<e.length;a++)t.id===e[a][this.keyIndex]&&(this.$toast({component:o.a,props:{title:"Alert",icon:"BellIcon",text:"Option already selected above",variant:"danger"}}),i=!0);if(i)return;var s={};""==this.relation?e.push(t):(s["".concat(this.keyIndex)]=t.id,s["".concat(this.relation)]=t,e.push(s)),this.$emit("input",e)}}else this.$emit("input",t);this.close()},onEnter:function(){if(!(this.disabled||this.selectIndex<0)){var t=this.options[this.selectIndex];this.select(t)}},onBlur:function(){this.close()},onMouse:function(t){this.selectIndex=t},close:function(){this.showDropdown=!1,this.selectIndex=-1,this.search="",this.options=[]},open:function(){var t=this;this.showDropdown=!0,this.$nextTick((function(){t.$refs.search.focus(),t.options.length||t.fetch()}))},toggle:function(){this.disabled||(this.showDropdown?this.close():this.open())}}},l=n("KHd+"),r=Object(l.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"select-form"},[n("div",{ref:"toggle",staticClass:"select-input",attrs:{tabindex:t.disabled?-1:t.tabindex,disabled:t.disabled},on:{click:t.toggle,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.onKeydownMain.apply(null,arguments))}}},[t.multiple?n("div",{staticClass:"select-text"},[t.value&&t.value.length?n("div",{staticClass:"select-tags mb-1"},t._l(t.value,(function(e,i){return n("div",{staticClass:"tag tag-primary"},[n("span",{staticClass:"tag-text"},[t._v("\n                      "+t._s(""===t.relation?e[t.name]:e[t.relation][t.name])+"\n                    ")]),t._v(" "),n("feather-icon",{attrs:{icon:"XIcon",size:"12"},on:{mousedown:function(n){return n.preventDefault(),t.remove(e,i)}}})],1)})),0):t._e()]):n("div",{staticClass:"select-text"},[t._v("\n            "+t._s(t.value&&t.value[t.name]?t.value[t.name]:"Select")+"\n        ")]),t._v(" "),t.removable&&t.value&&t.value.id?n("span",{staticClass:"select-remove icon icon-trash-a",on:{click:t.removeVal}}):n("span",{class:["select-icon icon icon-arrow-"+(t.showDropdown?"up-b":"down-b")]})]),t._v(" "),t.showDropdown?n("div",{staticClass:"select-dropdown",style:!0===t.positionRelative?"position:relative":""},[n("div",{staticClass:"select-inner"},[n("div",{staticClass:"select-search-wrap"},[n("input",{ref:"search",staticClass:"select-search",attrs:{type:"text",placeholder:"Search..."},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.onDownKey.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onEnter.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.onUpKey.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.onBlur.apply(null,arguments)}],input:t.onSearch,blur:t.onBlur}})]),t._v(" "),n("div",{ref:"items",staticClass:"select-items"},t._l(t.availableOptions,(function(e,i){return n("div",{class:["select-item",t.selectIndex===i?"select-active":""],on:{mouseover:function(e){return e.preventDefault(),t.onMouse(i)},mousedown:function(n){return n.preventDefault(),t.select(e)}}},[n("span",[t._v(t._s(e[t.name]))])])})),0)])]):t._e()])}),[],!1,null,null,null);e.a=r.exports}}]);